(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[602],{6342:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/orangepaper",function(){return n(2494)}])},2494:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return OrangePaperContentPage}});var i=n(5893),s=n(7294),a=n(2720),__assign=function(){return(__assign=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)},__rest=function(e,t){var n={};for(s in e)Object.prototype.hasOwnProperty.call(e,s)&&0>t.indexOf(s)&&(n[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,s=Object.getOwnPropertySymbols(e);i<s.length;i++)0>t.indexOf(s[i])&&Object.prototype.propertyIsEnumerable.call(e,s[i])&&(n[s[i]]=e[s[i]]);return n},typesettingFailed=function(e){return"Typesetting failed: ".concat(void 0!==e.message?e.message:JSON.stringify(e))},MathJax_MathJax=function(e){function r(){var e;"every"===y&&v&&"post"===g&&null!==f.current&&(f.current.style.visibility=null!=(e=null==(e=d.style)?void 0:e.visibility)?e:"visible"),_.current||("first"===y&&null!==f.current&&(f.current.style.visibility="visible"),i&&i(),_.current=!0),o&&o(),j.current=!1}var t=e.inline,n=void 0!==t&&t,t=e.hideUntilTypeset,i=e.onInitTypeset,o=e.onTypeset,l=e.text,c=e.dynamic,p=e.typesettingOptions,h=e.renderMode,u=e.children,d=__rest(e,["inline","hideUntilTypeset","onInitTypeset","onTypeset","text","dynamic","typesettingOptions","renderMode","children"]),m=(0,s.useRef)(""),f=(0,s.useRef)(null),x=(0,s.useContext)(a.n),y=null!=t?t:null==x?void 0:x.hideUntilTypeset,g=null!=h?h:null==x?void 0:x.renderMode,b=null!=p?p:null==x?void 0:x.typesettingOptions,v=!1!==c&&(c||!1),_=(0,s.useRef)(!1),j=(0,s.useRef)(!1);return!j.current&&null!==f.current&&v&&"every"===y&&"post"===g&&(f.current.style.visibility="hidden"),("undefined"!=typeof window?s.useLayoutEffect:s.useEffect)(function(){if((v||!_.current)&&null!==f.current){if(!x)throw Error("MathJax was not loaded, did you use the MathJax component outside of a MathJaxContext?");if("pre"===g){if(!("string"==typeof l&&0<l.length))throw Error("Render mode 'pre' requires text prop to be set and non-empty, which was currently \"".concat(l,'"'));if(!p||!p.fn)throw Error("Render mode 'pre' requires 'typesettingOptions' prop with 'fn' property to be set on MathJax element or in the MathJaxContext");if(2===x.version)throw Error("Render mode 'pre' only available with MathJax 3 and 4, and version 2 is currently in use")}"post"!==g&&l===m.current||j.current||(j.current=!0,3===x.version||4===x.version?x.promise.then(function(e){var t;"pre"===g?(t=function(t){m.current=l,e.startup.document.clear(),e.startup.document.updateDocument(),null!==f.current&&(f.current.innerHTML=t.outerHTML),r()},p.fn.endsWith("Promise")?e.startup.promise.then(function(){return e[b.fn](l,__assign(__assign({},(null==b?void 0:b.options)||{}),{display:!n}))}).then(t).catch(function(e){throw r(),Error(typesettingFailed(e))}):e.startup.promise.then(function(){t(e[b.fn](l,__assign(__assign({},(null==b?void 0:b.options)||{}),{display:!n})))}).catch(function(e){throw r(),Error(typesettingFailed(e))})):e.startup.promise.then(function(){return e.typesetClear([f.current]),e.typesetPromise([f.current])}).then(r).catch(function(e){throw r(),Error(typesettingFailed(e))})}).catch(function(e){throw r(),Error(typesettingFailed(e))}):x.promise.then(function(e){e.Hub.Queue(["Typeset",e.Hub,f.current]),e.Hub.Queue(r)}).catch(function(e){throw r(),Error(typesettingFailed(e))}))}}),s.createElement("span",__assign({},d,{style:__assign(__assign({display:n?"inline":"block"},d.style),{visibility:y?"hidden":null==(e=d.style)?void 0:e.visibility}),ref:f}),u)};function OrangePaperContentPage(){let[e,t]=(0,s.useState)("math"),[n,a]=(0,s.useState)(!0);(0,s.useEffect)(()=>{if(!n)return;let e=setInterval(()=>{t(e=>"math"===e?"formal":"math")},5e3);return()=>clearInterval(e)},[n]);let handleTabClick=e=>{a(!1),t(e)};return(0,i.jsx)("section",{id:"orange-paper",className:"section",children:(0,i.jsxs)("div",{className:"container",children:[(0,i.jsx)("h2",{children:"The Orange Paper (blvm-spec)"}),(0,i.jsx)("div",{className:"content",children:(0,i.jsxs)("div",{className:"orange-paper-with-diagram",children:[(0,i.jsxs)("div",{className:"orange-paper-content",children:[(0,i.jsxs)("p",{children:["Complete mathematical specification of Bitcoin consensus, extracted from Bitcoin Core."," ",(0,i.jsx)("a",{href:"https://thebitcoincommons.org/orange-paper.html",target:"_blank",rel:"noopener",children:"Read the Orange Paper"}),"."]}),(0,i.jsxs)("div",{className:"excerpt proof-showcase",children:[(0,i.jsx)("h4",{children:"Supply Convergence Proof"}),(0,i.jsxs)("div",{className:"proof-tabs",children:[(0,i.jsx)("button",{className:"proof-tab ".concat("math"===e?"active":""),"data-tab":"math",onClick:()=>handleTabClick("math"),children:"Math Proof"}),(0,i.jsx)("button",{className:"proof-tab ".concat("formal"===e?"active":""),"data-tab":"formal",onClick:()=>handleTabClick("formal"),children:"Formal Proof"})]}),(0,i.jsxs)("div",{className:"proof-content",children:[(0,i.jsxs)("div",{className:"proof-panel","data-panel":"math",style:{display:"math"===e?"block":"none"},children:[(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Theorem 6.2.3"})," (Supply Convergence): The total supply converges to exactly 21 million BTC."]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("p",{children:[(0,i.jsx)("em",{children:"Proof:"})," The total supply can be expressed as a sum of geometric series. For each halving period"," ",(0,i.jsx)(MathJax_MathJax,{inline:!0,children:"\\(k\\)"})," ","(","where"," ",(0,i.jsx)(MathJax_MathJax,{inline:!0,children:"\\(   k = \\lfloor h/H \\rfloor \\)"}),")",", the subsidy is"," ",(0,i.jsx)(MathJax_MathJax,{inline:!0,children:"\\(50 \\times C \\times 2^{-k}\\)"})," ","for ",(0,i.jsx)(MathJax_MathJax,{inline:!0,children:"\\(H\\)"})," consecutive blocks."]}),(0,i.jsx)(MathJax_MathJax,{children:"\n                                        \\[\n                                        \\lim_{h \\to \\infty} \\text{TotalSupply}(h)\n                                        = 21 \\times 10^6 \\times C\n                                        \\]\n                                        "}),(0,i.jsx)("p",{children:"The total supply is:"}),(0,i.jsx)(MathJax_MathJax,{children:"\n                                        \\[\n                                        \\text{TotalSupply}(\\infty)\n                                        = \\sum_{k=0}^{63} H \\times 50 \\times C \\times 2^{-k} \n                                        = H \\times 50 \\times C \\times \\sum_{k=0}^{63}2^{-k}\n                                        \n                                        \\]\n                                        "}),(0,i.jsxs)("p",{children:["Since"," ",(0,i.jsx)(MathJax_MathJax,{inline:!0,children:"\\(\\sum_{k=0}^{63} 2^{-k} = 2 - 2^{-63} \\approx 2\\)"})," ","for large ",(0,i.jsx)(MathJax_MathJax,{inline:!0,children:"\\(k\\)"}),":"]}),(0,i.jsx)(MathJax_MathJax,{children:"\n                                        \\[\n                                        \\text{TotalSupply}(\\infty)\n                                        \\approx H \\times 50 \\times C \\times 2\n                                        = 210{,}000 \\times 50 \\times 10^{8} \\times 2\n                                        = 21 \\times 10^6 \\times 10^{8}\n                                        \\]\n                                        "})]}),(0,i.jsxs)("p",{className:"proof-source",children:["Source:"," ",(0,i.jsx)("a",{href:"https://github.com/BTCDecoded/blvm-spec/blob/main/THE_ORANGE_PAPER.md#theorem-623-supply-convergence",target:"_blank",rel:"noopener",children:"Orange Paper, Theorem 6.2.3 (GitHub)"})]})]}),(0,i.jsxs)("div",{className:"proof-panel","data-panel":"formal",style:{display:"formal"===e?"block":"none"},children:[(0,i.jsx)("p",{className:"formal-proof-description",children:"This Rust code is formally verified using blvm-spec-lock with Z3 to prove the supply convergence property."}),(0,i.jsxs)("div",{className:"code-container",children:[(0,i.jsxs)("div",{className:"code-header",children:[(0,i.jsx)("span",{className:"code-filename",children:"blvm-consensus/src/economic.rs"}),(0,i.jsx)("a",{href:"https://github.com/BTCDecoded/blvm-consensus/blob/main/src/economic.rs#L55",target:"_blank",rel:"noopener",className:"code-link",children:"View on GitHub →"})]}),(0,i.jsx)("pre",{children:(0,i.jsx)("code",{className:"language-rust",children:'/// TotalSupply: ℕ → ℤ\n///\n/// Calculate the total Bitcoin supply at a given height.\n/// This is the sum of all block subsidies up to that height.\n#[spec_locked("6.2")]\npub fn total_supply(height: Natural) -> Integer {\n    // Implementation verified with blvm-spec-lock and Z3\n}'})})]})]})]})]}),(0,i.jsx)("a",{href:"https://thebitcoincommons.org/orange-paper.html",className:"btn btn-primary",target:"_blank",rel:"noopener",children:"Read the Orange Paper"}),(0,i.jsx)("a",{href:"https://github.com/BTCDecoded/blvm-spec",className:"btn btn-outline",target:"_blank",rel:"noopener",children:"View Source on GitHub"})]}),(0,i.jsxs)("div",{className:"coverage-diagram",children:[(0,i.jsx)("img",{src:"https://thebitcoincommons.org/assets/images/Consensus-Coverage-Comparison.png",alt:"Consensus Coverage Comparison"}),(0,i.jsx)("p",{className:"diagram-caption",children:"Comparison of consensus coverage between Bitcoin Core (testing-based) and Bitcoin Commons (formal verification plus testing)."})]})]})})]})})}}},function(e){e.O(0,[774,888,179],function(){return e(e.s=6342)}),_N_E=e.O()}]);